# AstrBot 截图插件 (astrbot_plugin_jietu)

🔧 插件名称：astrbot_plugin_jietu  
👤 作者：BvzRays  
📦 版本：v1.0.0  
🔗 源码地址：[GitHub](https://github.com/BvzRays/astrbot_plugin_jietu)  

---

## 🌟 功能简介

该插件为 AstrBot 提供了以下功能：

- ✅ **文字指令截图**：用户发送「截屏」指令后，机器人将自动截取当前屏幕并返回图片。
- ✅ **戳一戳截图**：当用户戳一戳（Poke）机器人时，自动触发屏幕截图并返回（可配置开关）。
---

## 📦 安装方法

1. **下载插件**

   从 GitHub 仓库下载源码，或者直接下载编译好的插件包（如有）。

2. **放置到 AstrBot 的插件目录**

   将插件文件夹（通常为 `astrbot_plugin_jietu`）放到 AstrBot 的 `plugins` 目录下。

3. **重启 AstrBot**

   确保插件被正确加载。

---

## ⚙️ 配置说明

插件的配置项位于 AstrBot 的全局或群组/私聊配置中，支持以下参数：

| 参数名 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `poke_screenshot` | bool | `true` | 是否启用「戳一戳触发截图」功能。设为 `false` 可关闭此功能。 |


---

## 🎮 使用方法

### 方法一：通过文字指令

- 用户在任意聊天窗口向机器人发送：
  ```
  /截屏
  ```
- 机器人将自动截取当前屏幕，并回复一张图片。

### 方法二：通过戳一戳（Poke）

- 在支持戳一戳的平台。
- 如果插件配置启用了 `poke_screenshot`，且冷却时间内未重复触发，机器人将截屏并返回图片。

> ⚠️ 戳一戳功能仅在 AstrBot 支持 Poke 事件的平台生效，且需要正确配置。

---

## 🛡️ 注意事项

- **权限要求**：目前「截屏」指令不限制管理员权限，所有用户均可触发；戳一戳功能默认仅对戳机器人的行为有效。
- **冷却机制**：为避免频繁截图，戳一戳触发有 1 秒的冷却时间（可通过修改源码调整）。
- **截图保存路径**：所有截图将保存在插件数据目录下的 `astrbot_plugin_screenshot` 文件夹中，文件名格式为 `screenshot_YYYYMMDD_HHMMSS.png`。
- **平台兼容性**：本插件依赖于 `pyautogui` 实现屏幕截图，确保运行环境支持 GUI 截图
- **异步安全**：截图操作通过线程执行，不会阻塞机器人主流程。

---

## 🧩 技术实现

- 使用 Python 标准库 `pyautogui` 实现屏幕截图。
- 借助 `asyncio.to_thread` 实现截图操作的异步安全调用。
- 通过 AstrBot 原生事件过滤机制，监听文字指令和 Poke 事件。
- 截图文件自动添加时间戳，便于追踪和管理。

---

## 🤝 贡献 & 反馈

欢迎提交 Issue 或 Pull Request，如果你有如下建议或需求：

- 增加更多触发方式（如快捷键、定时截图等）；
- 支持自定义截图区域或分辨率；
- 支持截图后自动上传到云存储或图床；
- 其他功能增强或 Bug 修复。

---

## 📄 开源协议

本项目采用 MIT 协议开源，详情请查看源码中的 LICENSE 文件（如有）。